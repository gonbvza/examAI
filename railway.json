{
    "build": {
      "builder": "nixpacks",
      "nixpacksPlan": {
        "phases": {
          "setup": {
            "aptPkgs": ["python3", "python3-pip", "python3-venv", "build-essential"]
          },
          "install": {
            "cmds": [
              "python3 -m venv /venv",
              "source /venv/bin/activate",
              "pip install --upgrade pip",
              "npm install --save-exact react react-dom @types/react@18.2.0 @types/react-dom@18.2.0 react-router-dom @fortawesome/react-fontawesome @fortawesome/free-solid-svg-icons @fortawesome/fontawesome-svg-core react-modal @types/react-modal js-cookie @types/js-cookie",
              "npm run build --prefix client",
              "cd server/server/ && pip install -r requirements.txt"
            ]
          }
        }
      }
    },
    "deploy": {
      "startCommand": "source /venv/bin/activate && cd server/server/ && python -m gunicorn serverDjango.wsgi:application --bind 0.0.0.0:$PORT --workers 3 && echo server",
      "restartPolicyType": "ON_FAILURE",
      "restartPolicyMaxRetries": 10
    },
    "plugins": {
      "postgresql": {
        "version": "17"
      }
    }
  }